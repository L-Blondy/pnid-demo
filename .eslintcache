[{"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/App.tsx":"1","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/index.tsx":"2","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/Page.tsx":"3","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/index.ts":"4","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/createGlobalListener.tsx":"5","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/useKeyBinding.tsx":"6","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/BoundingBox.tsx":"7","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/Router.tsx":"8","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/reportWebVitals.ts":"9","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/useIsValidClickRef.tsx":"10","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/data/index.ts":"11"},{"size":488,"mtime":1610469280211,"results":"12","hashOfConfig":"13"},{"size":500,"mtime":1610449932529,"results":"14","hashOfConfig":"13"},{"size":2355,"mtime":1610530988038,"results":"15","hashOfConfig":"13"},{"size":638,"mtime":1610469236939,"results":"16","hashOfConfig":"13"},{"size":649,"mtime":1610378852756,"results":"17","hashOfConfig":"13"},{"size":1069,"mtime":1610377988134,"results":"18","hashOfConfig":"13"},{"size":2091,"mtime":1610531282012,"results":"19","hashOfConfig":"13"},{"size":1944,"mtime":1610525134583,"results":"20","hashOfConfig":"13"},{"size":425,"mtime":1610370011410,"results":"21","hashOfConfig":"13"},{"size":713,"mtime":1610533469359,"results":"22","hashOfConfig":"13"},{"size":1815,"mtime":1610529320951,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"5bf90a",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/App.tsx",[],["52","53"],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/index.tsx",[],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/Page.tsx",["54","55"],"import { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom'\nimport { Stage, Layer, Image } from 'react-konva'\nimport BoundingBox from './BoundingBox'\nimport data from 'src/data'\n\nimport srcPage1 from 'src/assets/page1.jpg'\nimport srcPage2 from 'src/assets/page2.jpg'\nimport srcPage3 from 'src/assets/page3.jpg'\n\nconst fileName1 = srcPage1.split('/').pop() as string\nconst fileName2 = srcPage2.split('/').pop() as string\nconst fileName3 = srcPage3.split('/').pop() as string\n\nconst noop = () => { }\n\ninterface Props {\n\thighlightCount: number\n}\n\nfunction Page({\n\thighlightCount\n}: Props) {\n\n\tconst { fileName } = useParams<{ fileName: string }>()\n\tconst [ img, setImg ] = useState<HTMLImageElement | null>(null)\n\tconst resetRef = useRef(noop)\n\n\tconst dataMap = React.useMemo(() => fileName === fileName1\n\t\t? data.page1\n\t\t: fileName === fileName2\n\t\t\t? data.page2\n\t\t\t: data.page3\n\t\t, [ fileName ])\n\n\tuseEffect(() => {\n\t\tsetImg(null)\n\n\t\tlet _img: HTMLImageElement\n\t\t_img = document.createElement('img')\n\t\t_img.src = '/pnid-demo/static/media/' + fileName\n\t\t_img.onload = () => setImg(_img)\n\t\t_img.onerror = console.log\n\t}, [ fileName ])\n\n\tconsole.log('render page')\n\n\tconst boxMap = React.useMemo(() => (\n\t\tdataMap.map(data => (\n\t\t\t<BoundingBox\n\t\t\t\tkey={JSON.stringify(data)}\n\t\t\t\tminX={data.minX}\n\t\t\t\tminY={data.minY}\n\t\t\t\tmaxX={data.maxX}\n\t\t\t\tmaxY={data.maxY}\n\t\t\t\tto={data.to}\n\t\t\t\tresetTransform={resetRef.current}\n\t\t\t\thighlightCount={highlightCount}\n\t\t\t/>\n\t\t))\n\t), [ dataMap, highlightCount ])\n\n\treturn (\n\n\t\t<TransformWrapper\n\t\t\twheel={{ step: 200, }}\n\t\t\toptions={{ limitToBounds: false, minScale: 0.5, maxScale: 10 }}\n\t\t\tdoubleClick={{ disabled: true }}\n\t\t\treset={{ animation: false, animationTime: 0 }}>\n\n\t\t\t{({ resetTransform }: { resetTransform: () => void }) => {\n\t\t\t\tresetRef.current = resetTransform\n\n\t\t\t\treturn (\n\n\t\t\t\t\t<TransformComponent>\n\t\t\t\t\t\t<div className='image-wrapper'>\n\t\t\t\t\t\t\t<Stage\n\t\t\t\t\t\t\t\tclassName={`image ${!!img ? 'loaded' : 'pending'}`}\n\t\t\t\t\t\t\t\twidth={3308}\n\t\t\t\t\t\t\t\theight={2339}>\n\n\t\t\t\t\t\t\t\t<Layer>\n\t\t\t\t\t\t\t\t\t<Image image={img || undefined} />\n\t\t\t\t\t\t\t\t</Layer>\n\n\t\t\t\t\t\t\t</Stage>\n\n\t\t\t\t\t\t\t{!!img && boxMap}\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TransformComponent>\n\t\t\t\t)\n\t\t\t}}\n\n\t\t</TransformWrapper >\n\t)\n}\n\nexport default Page;",["56","57"],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/index.ts",[],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/createGlobalListener.tsx",[],["58","59"],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/useKeyBinding.tsx",[],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/BoundingBox.tsx",["60","61"],"import React, { useEffect, useRef, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { useGlobalMouseUp, useGlobalMouseMove } from 'src/hooks'\n\n\ninterface Props {\n\tminX: number,\n\tminY: number,\n\tmaxX: number,\n\tmaxY: number,\n\tto: string,\n\tresetTransform: () => void\n\thighlightCount: number\n}\n\nconst BoundingBox = ({\n\tminX,\n\tminY,\n\tmaxX,\n\tmaxY,\n\tto,\n\tresetTransform,\n\thighlightCount\n\n}: Props) => {\n\n\tconst { fileName } = useParams<{ fileName: string }>()\n\tconst isMouseDownRef = useRef(false)\n\tconst [ isValidClick, setIsValidClick ] = useState(true)\n\tconst isFirstRenderRef = useRef(true)\n\tconst linkRef = useRef<HTMLAnchorElement | null>(null)\n\tconst divRef = useRef<HTMLDivElement | null>(null)\n\tconst isMountedRef = useRef(true)\n\n\tconst style = {\n\t\tleft: minX * 100 + '%',\n\t\ttop: minY * 100 + '%',\n\t\tright: (1 - maxX) * 100 + '%',\n\t\tbottom: (1 - maxY) * 100 + '%',\n\t\tpointerEvents: isValidClick ? 'auto' : 'none' as 'auto' | 'none'\n\t}\n\n\tuseEffect(() => resetTransform(), [ to ])\n\n\tuseEffect(() => {\n\t\tisMountedRef.current = false\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!isFirstRenderRef.current) {\n\n\t\t\tlinkRef.current?.classList.contains('highlight') && linkRef.current?.classList.remove('highlight')\n\t\t\tsetTimeout(() => linkRef.current?.classList.add('highlight'), 17)\n\t\t\tdivRef.current?.classList.contains('highlight') && divRef.current?.classList.remove('highlight')\n\t\t\tsetTimeout(() => divRef.current?.classList.add('highlight'), 17)\n\t\t}\n\t\tisFirstRenderRef.current = false\n\t}, [ highlightCount ])\n\n\tfunction handleMouseDown() {\n\t\tisMouseDownRef.current = true\n\t}\n\n\tuseGlobalMouseMove(() => {\n\t\tisMouseDownRef.current && setIsValidClick(false)\n\t\tsetTimeout(() => !isMouseDownRef.current && setIsValidClick(true), 3000)\n\t})\n\n\tuseGlobalMouseUp(() => {\n\t\tsetIsValidClick(true)\n\t\tisMouseDownRef.current = false\n\t})\n\n\tuseEffect(() => {\n\t\tconsole.log(isValidClick)\n\t}, [ isValidClick ])\n\n\treturn (\n\t\t<Link\n\t\t\tref={linkRef}\n\t\t\tonMouseDown={handleMouseDown}\n\t\t\tclassName='bounding_box'\n\t\t\tstyle={style}\n\t\t\tto={to}\n\t\t/>\n\t)\n\n}\n\nexport default React.memo(BoundingBox);","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/components/Router.tsx",["62","63","64"],"import { BrowserRouter, Switch, Route, Redirect, useLocation } from 'react-router-dom'\nimport App from 'src/App'\nimport { useEffect, useState } from 'react'\n\nimport srcPage1 from 'src/assets/page1.jpg'\nconst fileName1: string = srcPage1.split('/').pop() as string\n\nconst Router: React.FC = () => {\n\n\treturn (\n\t\t<BrowserRouter basename='/pnid-demo/'>\n\t\t\t<div className='help'>\n\t\t\t\t<button>\n\t\t\t\t\t<svg width=\"512\" height=\"512\" viewBox=\"0 0 512 512\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<rect width=\"512\" height=\"512\" rx=\"256\" fill=\"white\" />\n\t\t\t\t\t\t<path d=\"M256 0C114.833 0 0 114.833 0 256C0 397.167 114.833 512 256 512C397.167 512 512 397.167 512 256C512 114.833 397.167 0 256 0ZM245.333 426.667C227.687 426.667 213.333 412.313 213.333 394.667C213.333 377.021 227.687 362.667 245.333 362.667C262.979 362.667 277.333 377.021 277.333 394.667C277.333 412.313 262.979 426.667 245.333 426.667ZM277.333 296.542V330.667C277.333 336.563 272.562 341.334 266.666 341.334H224C218.104 341.334 213.333 336.563 213.333 330.667V277.334C213.333 253.813 232.479 234.667 256 234.667C279.521 234.667 298.667 215.521 298.667 192C298.667 168.479 279.521 149.333 256 149.333C232.479 149.333 213.333 168.479 213.333 192V202.667C213.333 208.563 208.562 213.334 202.666 213.334H160C154.104 213.334 149.333 208.563 149.333 202.667V192C149.333 133.187 197.187 85.333 256 85.333C314.813 85.333 362.667 133.188 362.667 192C362.667 243.188 326.604 286.563 277.333 296.542Z\" fill=\"#00A1E7\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\n\t\t\t\t<ul className=\"content\">\n\t\t\t\t\t<li> Use mouse wheel to <b>zoom</b>. </li>\n\t\t\t\t\t<li> Click and drag to <b>move</b>. </li>\n\t\t\t\t\t<li> Click anywhere to <b>show hotspots</b>. </li>\n\t\t\t\t\t<li> Click a part to display the related <b>P&ID</b>. </li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<Switch>\n\t\t\t\t<Route path='/pnid/:fileName'>\n\t\t\t\t\t<App />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to={`/pnid/${fileName1}`} />\n\t\t\t</Switch>\n\t\t</BrowserRouter>\n\t)\n}\n\nexport default Router","/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/reportWebVitals.ts",[],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/hooks/useIsValidClickRef.tsx",[],"/home/laurent/Code/cenozai - P&ID demo/pnid-demo/src/data/index.ts",[],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":2,"column":28,"nodeType":"71","messageId":"72","endLine":2,"endColumn":35},{"ruleId":"69","severity":1,"message":"73","line":14,"column":7,"nodeType":"71","messageId":"72","endLine":14,"endColumn":16},{"ruleId":"65","replacedBy":"74"},{"ruleId":"67","replacedBy":"75"},{"ruleId":"65","replacedBy":"76"},{"ruleId":"67","replacedBy":"77"},{"ruleId":"69","severity":1,"message":"78","line":27,"column":10,"nodeType":"71","messageId":"72","endLine":27,"endColumn":18},{"ruleId":"79","severity":1,"message":"80","line":43,"column":36,"nodeType":"81","endLine":43,"endColumn":42,"suggestions":"82"},{"ruleId":"69","severity":1,"message":"83","line":1,"column":50,"nodeType":"71","messageId":"72","endLine":1,"endColumn":61},{"ruleId":"69","severity":1,"message":"84","line":3,"column":10,"nodeType":"71","messageId":"72","endLine":3,"endColumn":19},{"ruleId":"69","severity":1,"message":"85","line":3,"column":21,"nodeType":"71","messageId":"72","endLine":3,"endColumn":29},"no-native-reassign",["86"],"no-negated-in-lhs",["87"],"@typescript-eslint/no-unused-vars","'useMemo' is defined but never used.","Identifier","unusedVar","'fileName3' is assigned a value but never used.",["86"],["87"],["86"],["87"],"'fileName' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'resetTransform'. Either include it or remove the dependency array. If 'resetTransform' changes too often, find the parent component that defines it and wrap that definition in useCallback.","ArrayExpression",["88"],"'useLocation' is defined but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"89","fix":"90"},"Update the dependencies array to be: [resetTransform, to]",{"range":"91","text":"92"},[1007,1013],"[resetTransform, to]"]